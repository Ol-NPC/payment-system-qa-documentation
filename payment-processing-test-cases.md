## ID: PAY-001
**Название:** Успешная оплата картой без 3-D Secure

**Предусловия:**
-	Пользователь авторизован в системе
-	Создан заказ со статусом NEW
-	Для сумм от 30 USD требуется 3DS
-	Например 29,99 USD, стоимость заказа соответствует максимальной сумме доступной без использования 3-D Secure. 
-	Пользователь находится на странице оплаты заказа

**Шаги:**
1.	Ввести валидный номер карты.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**
-	Клиентская валидация проходит успешно.
-	Запрос отправляется в платёжный шлюз.
-	3-D Secure не вызывается.
-	Статус заказа изменён на УСПЕШНО.
-	Пользователь видит сообщение об успешной оплате.
-	На указанный email отправлен чек.

## ID: PAY-002
**Название:** Успешная оплата с 3-D Secure

**Предусловия:**
-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Для сумм от 30 USD требуется 3DS
-	Например 30 USD, стоимость заказа соответствует минимальной сумме для оплат с 3-D Secure 
-	Пользователь находится на странице оплаты
  
**Шаги:**
 	
1.	Ввести валидные данные карты.
2.	Ввести корректный email.
3.	Нажать «Оплатить».
4.	На странице 3-D Secure подтвердить операцию.
   
**Ожидаемый результат:**

-	Пользователь перенаправляется на страницу 3DS.
-	После подтверждения происходит возврат в приложение.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.

## ID: PAY-003

**Название:** Оплата при различии валюты заказа и валюты карты

**Предусловия:**
-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Валюта заказа EUR
-	Валюта карты для оплаты USD
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидные данные USD-карты.
2.	Ввести корректный email.
3.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**
-	Операция проходит успешно.
-	В истории транзакции фиксируется валюта заказа (EUR).
-	При наличии отображается информация о курсе конвертации.
-	Статус заказа меняется на УСПЕШНО.
-	Чек отправлен с корректной валютой заказа.
-	Сумма списания по карте соответствует конвертации.

## ID: PAY-004

**Название:** Отклонение банком: Недостаточно средств

**Предусловия:**
-	Пользователь авторизован
-	Заказ в статусе NEW
-	Пользователь находится на странице оплаты
-	Использовать данные карты с нулевым балансом
  
**Шаги:**

1.	Ввести данные карты.
2.	Ввести валидный email.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Получен ответ Откланено банком.
-	Статус заказа остаётся NEW.
-	Отображается сообщение о недостатке средств.
-	Чек не отправляется.

## ID: PAY-005

**Название:** Отклонение банком: неверный CVV

**Предусловия:**

-	Пользователь авторизован
-	Заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**
 	
1.	Ввести валидный номер карты.
2.	Ввести неверный CVV.
3.	Ввести валидный email.
4.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Получен ответ Откланено банком.
-	Статус заказа остаётся NEW.
-	Отображается сообщение об ошибке.
-	Чек об оплате не отправляется.

## ID: PAY-006

**Название:** Отмена 3-D Secure пользователем

**Предусловия:**

-	Пользователь авторизован
-	Заказ в статусе NEW
-	Для сумм от 30 USD требуется 3DS
-	Стоимость заказа соответствует минимальной сумме для оплат с 3-D Secure
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидные данные карты.
2.	Ввести валидный email.
3.	Нажать «Оплатить».
4.	На странице 3DS выбрать «Отмена» или закрыть окно без подтверждения.
   
**Ожидаемый результат:**

-	Происходит возврат в приложение.
-	Статус заказа остаётся NEW.
-	Отображается сообщение о неуспешной оплате/ Ошибка платёжного сервиса.
-	Чек на email не отправляется.

## ID: PAY-007

**Название:** Таймаут ответа от платёжного шлюза

**Предусловия:**

-	Пользователь авторизован
-	Заказ в статусе NEW
-	Пользователь находится на странице оплаты
-	Система имеет ограничение по времени на проведение платежной сессии
-	Выдержать паузу, превышающую максимально допустимое время платежной сессии (например, 20 минут), не заполняя форму
  
**Шаги:**

1.	Ввести валидные данные карты.
2.	Ввести валидный email.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается сообщение о превышении времени ожидания / об истечении времени сессии.
-	Появляется сообщение «Перезагрузить и повторить ввод данных».
-	Статус заказа остаётся NEW.
-	Пользователь может безопасно повторить попытку.
-	Повторный запрос не приводит к двойному списанию.

## ID: PAY-008

**Название:** Минимально допустимая сумма заказа для формирования покупки

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Сумма заказа равна минимальной сумме покупки (например 15 USD)
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидные данные карты.
2.	Ввести валидный email.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Платёж проходит успешно.
-	Сумма корректно отображается в UI.
-	Статус заказа становится УСПЕШНО.
-	Чек отправлен на email.

## ID: PAY-009

**Название:** Максимально допустимая сумма заказа для формирования покупки

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Сумма заказа равна максимальной сумме покупки (например, 999.99$)
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
6. На странице 3-D Secure подтвердить операцию.
   
**Ожидаемый результат:**

-	Пользователь перенаправляется на страницу 3DS.
-	После подтверждения происходит возврат в приложение.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.


## ID: PAY-010

**Название:** Сумма заказа выше лимита суммы для формирования покупки

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Сумма заказа превышает допустимый лимит (например, 1000,00 $)
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**

-	Получено отказ/предупреждение
-	Отображается сообщение о превышении лимита установленной суммы заказа.
-	Статус заказа остаётся NEW.
-	Чек не отправляется.

## ID: PAY-011

**Название:** Сумма заказа ниже допустимой сумме заказа для формирования покупки

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Заказ формируется при суммах покупки от 15 USD требуется
-	Например, 14,99 $, сумма заказа ниже минимальной суммы покупки 
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**

-	Получено отказ/предупреждение
-	Отображается сообщение, что сумма заказа ниже установленной суммы для формирования покупки.
-	Статус заказа остаётся NEW.
-	Чек не отправляется.

## ID: PAY-012

**Название:** Номер карты из 19 цифр (максимально допустимое значение)

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
-	Оплата происходит с использованием номера карты из 19 цифр
  
**Шаги:**

1.	Ввести валидный номер карты из 19 цифр.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**

-	Номер принимается системой.
-	Валидация проходит успешно.
-	Ошибок формата не возникает.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.

## ID: PAY-013

**Название:** Номер карты из 15 цифр (минимально допустимое значение)

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
-	Оплата происходит с использованием номера карты из 15 цифр
  
**Шаги:**

1.	Ввести валидный номер карты из 15 цифр.
2.	Указать корректный срок действия.
3.	Ввести корректный CVV.
4.	Ввести валидный email.
5.	Нажать кнопку «Оплатить».
   
**Ожидаемый результат:**

-	Номер принимается системой.
-	Валидация проходит успешно.
-	Ошибок формата не возникает.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.

## ID: PAY-014

**Название:** CVV/CVC-код из 4 цифр

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Используется карта, предполагающая CVV/CVC-код из 4 цифр
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Ввести CVV/CVC-код 4 цифр.
3.	Заполнить остальные поля валидными данными.
4.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Клиентская валидация проходит успешно.
-	Ошибок длины не возникает.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.

## ID: PAY-015

**Название:** CVV менее допустимой длины

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Ввести CVV из 2 цифр.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается ошибка длины CVV.
-	Запрос не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-016

**Название:** CVV более допустимой длины

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидный номер карты.
2.	Пробовать ввести CVV из 5 цифр.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Поле ограничивает ввод, невозможность ввести более 4 цифр
-	Запрос не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-017

**Название:** Пустое поле номера карты

**Предусловия:**

-	Пользователь авторизован
-	Заказ в статусе NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Оставить поле «Номер карты» пустым.
2.	Заполнить остальные поля валидными данными.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается сообщение об обязательности поля.
-	Клиентская валидация не проходит.
-	Запрос в шлюз не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-018

**Название:** Номер карты содержит буквенные символы

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	В поле «Номер карты» ввести значение с буквами (например, 4111aaaa1111bbbb).
2.	Заполнить остальные поля валидными данными.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается ошибка формата номера.
-	Клиентская валидация не проходит.
-	Запрос в шлюз не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-019

**Название:** Невалидный номер карты

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести номер карты с неверной контрольной цифрой 1111 1111 1111 1111.
2.	Заполнить остальные поля корректно.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается сообщение «Проверьте номер карты».
-	Запрос в шлюз не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-020

**Название:** Истёкший срок действия карты

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести прошедший срок действия.
2.	Заполнить остальные поля корректно.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается сообщение о просроченной карте.
-	Запрос не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-021

**Название:** Некорректный формат email

**Предусловия:**

-	Пользователь авторизован
-	Создан заказ со статусом NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести email без символа «@» или доменной части.
2.	Заполнить платёжные данные.
3.	Нажать «Оплатить».
   
**Ожидаемый результат:**

-	Отображается ошибка формата email.
-	Запрос в шлюз не отправляется.
-	Статус заказа остаётся NEW.

## ID: PAY-022

**Название:** Двойное нажатие кнопки «Оплатить»

**Предусловия:**

-	Пользователь авторизован
-	Заказ в статусе NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидные данные.
2.	Быстро дважды нажать кнопку «Оплатить».
   
**Ожидаемый результат:**

-	В DevTools (вкладка Network) зафиксирован один POST-запрос.
-	Создана одна транзакция.
-	Статус заказа корректно обновляется.
-	Повторного списания не происходит.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.

## ID: PAY-023

**Название:** Обновление страницы во время обработки платежа

**Предусловия:**

-	Пользователь авторизован
-	Заказ в статусе NEW
-	Пользователь находится на странице оплаты
  
**Шаги:**

1.	Ввести валидные данные карты.
2.	Нажать «Оплатить».
3.	До получения ответа обновить страницу.
   
**Ожидаемый результат:**

-	После загрузки страницы отображается актуальный статус заказа.
-	Новая транзакция автоматически не создаётся.
-	Повторного списания не происходит.
-	Статус заказа изменён на УСПЕШНО.
-	На указанный email отправлен чек.


